app.controller("ctrl_operation_Glassorders",(function($scope,$http){let project_id;function all_techApprovalsType(){let post_data={naf_user:userinfo};$http({method:"post",data:post_data,url:api_url+"Approval_Type/index.php"}).then((function(res){console.log(res.data),"1"===res.data.msg?$scope.menu_Techapprovals=res.data.data:alert(res.data.data)}))}$("#back_btn").on("click",(function(){window.history.back()})),sessionStorage.getItem("nafco_project_current")&&""!==sessionStorage.getItem("nafco_project_current")?(project_id=sessionStorage.getItem("nafco_project_current"),get_projectinfo()):projectlist(),all_techApprovalsType();var project_boq_refno="",project_boq_revision="";function get_projectinfo(){let post_data={naf_user:userinfo,project_no:project_id};var req;$http.post(api_url+"Project/view.php",post_data).then(res=>{"1"===res.data.msg?($scope.viewproject=res.data.data,$scope.newproject=res.data.data,project_id=angular.lowercase(res.data.data.project_no),""===res.data.data.project_boq_refno||""===res.data.data.project_boq_revision||(project_boq_refno=res.data.data.project_boq_refno,project_boq_revision=res.data.data.project_boq_revision),$scope.newglassorder={project_id:project_id},glassorder_all()):alert(res.data.data)})}function glassorder_all(){let post_data={naf_user:userinfo,project_no:project_id};$http({method:"post",url:api_url+"glassorder/index.php",data:post_data}).then(res=>{console.log(res.data),"1"===res.data.msg?$scope.glassorder=res.data.data:alert(res.data.data)})}function suppliers_all(){let post_data={naf_user:userinfo};$http({url:api_url+"suppliers/index.php",method:"POST",data:post_data}).then((function(res){console.log(res.data),"1"===res.data.msg?$scope.supplier_list=res.data.data:alert(res.data.data)}))}function all_glassTypes(){let post_data={naf_user:userinfo};$http({method:"post",url:api_url+"GlassType/index.php",data:post_data}).then(res=>{console.log(res.data),"1"===res.data.msg?$scope.glasstypes=res.data.data:alert(res.data.data)})}$scope.glassorder=[],suppliers_all(),all_glassTypes()}));